{
  "contract": {
    "name": "Stamp Canonical Diagnostic Fixtures",
    "version": "1.0.0",
    "cdo_schema_uri": "https://waveframelabs.org/schemas/stamp-cdo-v1.json"
  },
  "cases": [
    {
      "id": "case_001_required_missing_simple",
      "description": "Validates that a missing required property at the root level emits a deterministic required.missing error.",
      "schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "type": "object",
        "required": ["license"],
        "properties": {
          "license": { "type": "string" }
        }
      },
      "instance": {
        "title": "Missing License Example"
      },
      "expected_diagnostics": [
        {
          "id": "required.missing",
          "severity": "error",
          "schema_keyword": "required",
          "instance_path": "",
          "schema_path": "/required",
          "message": "Required property 'license' is missing.",
          "details": {
            "missing_property": "license"
          },
          "fix": null,
          "provenance": {
            "timestamp": "2026-01-01T00:00:00Z",
            "stamp_version": "0.0.0-fixture",
            "schema_version": "fixture-v1",
            "validator_engine": "fixture-mock"
          }
        }
      ]
    },
    {
      "id": "case_002_required_missing_multiple",
      "description": "Validates that multiple missing required properties emit one required.missing diagnostic per field.",
      "schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "type": "object",
        "required": ["license", "version"],
        "properties": {
          "license": { "type": "string" },
          "version": { "type": "string" }
        }
      },
      "instance": {
        "title": "Missing Multiple Required Fields Example"
      },
      "expected_diagnostics": [
        {
          "id": "required.missing",
          "severity": "error",
          "schema_keyword": "required",
          "instance_path": "",
          "schema_path": "/required",
          "message": "Required property 'license' is missing.",
          "details": {
            "missing_property": "license"
          },
          "fix": null,
          "provenance": {
            "timestamp": "2026-01-01T00:00:00Z",
            "stamp_version": "0.0.0-fixture",
            "schema_version": "fixture-v1",
            "validator_engine": "fixture-mock"
          }
        },
        {
          "id": "required.missing",
          "severity": "error",
          "schema_keyword": "required",
          "instance_path": "",
          "schema_path": "/required",
          "message": "Required property 'version' is missing.",
          "details": {
            "missing_property": "version"
          },
          "fix": null,
          "provenance": {
            "timestamp": "2026-01-01T00:00:00Z",
            "stamp_version": "0.0.0-fixture",
            "schema_version": "fixture-v1",
            "validator_engine": "fixture-mock"
          }
        }
      ]
    },
    {
      "id": "case_003_additional_properties_forbidden",
      "description": "Validates that an extra property is rejected when additionalProperties is false and emits a mechanical prune fix.",
      "schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "license": { "type": "string" }
        }
      },
      "instance": {
        "license": "Apache-2.0",
        "internal_id": "abc123"
      },
      "expected_diagnostics": [
        {
          "id": "object.no_additional_properties",
          "severity": "error",
          "schema_keyword": "additionalProperties",
          "instance_path": "",
          "schema_path": "/additionalProperties",
          "message": "Property 'internal_id' is not allowed.",
          "details": {
            "property": "internal_id"
          },
          "fix": {
            "fixable": true,
            "strategy": "prune",
            "parameters": {
              "key": "internal_id"
            }
          },
          "provenance": {
            "timestamp": "2026-01-01T00:00:00Z",
            "stamp_version": "0.0.0-fixture",
            "schema_version": "fixture-v1",
            "validator_engine": "fixture-mock"
          }
        }
      ]
    },
    {
      "id": "case_004_enum_mismatch",
      "description": "Validates that enum violations emit a diagnostic with no fix, even when allowed values are known.",
      "schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["Draft", "Final"]
          }
        }
      },
      "instance": {
        "status": "draft"
      },
      "expected_diagnostics": [
        {
          "id": "enum.mismatch",
          "severity": "error",
          "schema_keyword": "enum",
          "instance_path": "/status",
          "schema_path": "/properties/status/enum",
          "message": "Value is not one of the allowed enum values.",
          "details": {
            "allowed_values": ["Draft", "Final"],
            "value": "draft"
          },
          "fix": null,
          "provenance": {
            "timestamp": "2026-01-01T00:00:00Z",
            "stamp_version": "0.0.0-fixture",
            "schema_version": "fixture-v1",
            "validator_engine": "fixture-mock"
          }
        }
      ]
    },
    {
      "id": "case_005_type_mismatch",
      "description": "Validates that type mismatches emit a diagnostic with no fix and no coercion.",
      "schema": {
        "$schema": "https://json-schema.org/draft/2020-12/schema",
        "type": "object",
        "properties": {
          "count": {
            "type": "number"
          }
        }
      },
      "instance": {
        "count": "5"
      },
      "expected_diagnostics": [
        {
          "id": "type.mismatch",
          "severity": "error",
          "schema_keyword": "type",
          "instance_path": "/count",
          "schema_path": "/properties/count/type",
          "message": "Value does not match the expected type.",
          "details": {
            "expected_type": "number",
            "actual_type": "string",
            "value": "5"
          },
          "fix": null,
          "provenance": {
            "timestamp": "2026-01-01T00:00:00Z",
            "stamp_version": "0.0.0-fixture",
            "schema_version": "fixture-v1",
            "validator_engine": "fixture-mock"
          }
        }
      ]
    }
  ]
}
